!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,a,o){for(var u,s,l,f=0,p=[];f<r.length;f++)s=r[f],i[s]&&p.push(i[s][0]),i[s]=0;for(u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u]);for(n&&n(r,a,o);p.length;)p.shift()();if(o)for(f=0;f<o.length;f++)l=t(t.s=o[f]);return l};var r={},i={1:0};t.e=function(e){function n(){u.onerror=u.onload=null,clearTimeout(s);var t=i[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),i[e]=void 0)}var r=i[e];if(0===r)return new Promise(function(e){e()});if(r)return r[2];var a=new Promise(function(t,n){r=i[e]=[t,n]});r[2]=a;var o=document.getElementsByTagName("head")[0],u=document.createElement("script");u.type="text/javascript",u.charset="utf-8",u.async=!0,u.timeout=12e4,t.nc&&u.setAttribute("nonce",t.nc),u.src=t.p+""+({0:"app"}[e]||e)+"."+{0:"9813be55cc5cc6b5b8ff"}[e]+".js";var s=setTimeout(n,12e4);return u.onerror=u.onload=n,o.appendChild(u),a},t.m=e,t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.oe=function(e){throw e},t(t.s=53)}([function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(27)("wks"),i=n(17),a=n(3).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(3),i=n(0),a=n(20),o=n(7),u=function(e,t,n){var s,l,f,p=e&u.F,h=e&u.G,d=e&u.S,y=e&u.P,v=e&u.B,g=e&u.W,b=h?i:i[t]||(i[t]={}),m=b.prototype,w=h?r:d?r[t]:(r[t]||{}).prototype;h&&(n=t);for(s in n)(l=!p&&w&&void 0!==w[s])&&s in b||(f=l?w[s]:n[s],b[s]=h&&"function"!=typeof w[s]?n[s]:v&&l?a(f,r):g&&w[s]==f?function(e){var t=function(t,n,c){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,c)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):y&&"function"==typeof f?a(Function.call,f):f,y&&((b.virtual||(b.virtual={}))[s]=f,e&u.R&&m&&!m[s]&&o(m,s,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(8),i=n(35),a=n(21),o=Object.defineProperty;t.f=n(5)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(4),i=n(12);e.exports=n(5)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(38),i=n(24);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(49),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){var r=n(37),i=n(28);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(24);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(52);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,c){return e.call(t,n,r,c)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports={default:n(56),__esModule:!0}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(27)("keys"),i=n(17);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(3),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){e.exports=!0},function(e,t,n){var r=n(8),i=n(72),a=n(28),o=n(26)("IE_PROTO"),u=function(){},s=function(){var e,t=n(36)("iframe"),r=a.length;for(t.style.display="none",n(73).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;r--;)delete s.prototype[a[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[o]=e):n=s(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(4).f,i=n(6),a=n(1)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){t.f=n(1)},function(e,t,n){var r=n(3),i=n(0),a=n(30),o=n(33),u=n(4).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:o.f(e)})}},function(e,t,n){e.exports=!n(5)&&!n(10)(function(){return 7!=Object.defineProperty(n(36)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(9),i=n(3).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(6),i=n(11),a=n(59)(!1),o=n(26)("IE_PROTO");e.exports=function(e,t){var n,u=i(e),s=0,l=[];for(n in u)n!=o&&r(u,n)&&l.push(n);for(;t.length>s;)r(u,n=t[s++])&&(~a(l,n)||l.push(n));return l}},function(e,t,n){var r=n(23);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(25),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(6),i=n(19),a=n(26)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(68),a=r(i),o=n(78),u=r(o),s="function"==typeof u.default&&"symbol"==typeof a.default?function(e){return typeof e}:function(e){return e&&"function"==typeof u.default&&e.constructor===u.default&&e!==u.default.prototype?"symbol":typeof e};t.default="function"==typeof u.default&&"symbol"===s(a.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof u.default&&e.constructor===u.default&&e!==u.default.prototype?"symbol":void 0===e?"undefined":s(e)}},function(e,t,n){"use strict";var r=n(70)(!0);n(43)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(30),i=n(2),a=n(44),o=n(7),u=n(6),s=n(13),l=n(71),f=n(32),p=n(40),h=n(1)("iterator"),d=!([].keys&&"next"in[].keys()),y=function(){return this};e.exports=function(e,t,n,v,g,b,m){l(n,t,v);var w,x,E,_=function(e){if(!d&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",k="values"==g,j=!1,O=e.prototype,S=O[h]||O["@@iterator"]||g&&O[g],C=!d&&S||_(g),R=g?k?_("entries"):C:void 0,B="Array"==t?O.entries||S:S;if(B&&(E=p(B.call(new e)))!==Object.prototype&&E.next&&(f(E,T,!0),r||u(E,h)||o(E,h,y)),k&&S&&"values"!==S.name&&(j=!0,C=function(){return S.call(this)}),r&&!m||!d&&!j&&O[h]||o(O,h,C),s[t]=C,s[T]=y,g)if(w={values:k?C:_("values"),keys:b?C:_("keys"),entries:R},m)for(x in w)x in O||a(O,x,w[x]);else i(i.P+i.F*(d||j),t,w);return w}},function(e,t,n){e.exports=n(7)},function(e,t,n){var r=n(37),i=n(28).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(18),i=n(12),a=n(11),o=n(21),u=n(6),s=n(35),l=Object.getOwnPropertyDescriptor;t.f=n(5)?l:function(e,t){if(e=a(e),t=o(t,!0),s)try{return l(e,t)}catch(e){}if(u(e,t))return i(!r.f.call(e,t),e[t])}},,,function(e,t,n){e.exports={default:n(50),__esModule:!0}},function(e,t,n){n(51);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(2);r(r.S+r.F*!n(5),"Object",{defineProperty:n(4).f})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports=n(54)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55),i=n(107),a=n(108);$(window).ready(function(){function e(e){if(document.documentElement.clientWidth>=document.documentElement.clientHeight){if($("#loading").css({transform:"rotate(0deg)"}),!e)return;if(e.rotation=0,e.x=0,e.canvas.width<e.canvas.height){var t=[e.canvas.height,e.canvas.width];e.canvas.width=t[0],e.canvas.height=t[1]}}else{if($("#loading").css({transform:"rotate(90deg)"}),$(".auto-scale").css({width:"auto",height:"auto"}),!e)return;if(e.x=720,e.rotation=90,e.canvas.width>e.canvas.height){var n=[e.canvas.height,e.canvas.width];e.canvas.width=n[0],e.canvas.height=n[1]}}e.update()}window.babyEye||(window.babyEye=r.a),r.a.setWrapText=a.a,r.a.prepareTrain=i.a,r.a.detectOrient=function(){window.game&&e(window.game.stage),window.instructionStage&&e(window.instructionStage),e()},r.a.handleResize=function(){window.innerWidth<1280*window.innerHeight/720?$(".auto-scale").css({height:"auto",width:"100vw"}):$(".auto-scale").css({height:"100vh",width:"auto"}),r.a.detectOrient()},window.addEventListener("resize",r.a.handleResize,!1),r.a.handleResize(),window.babyEye=r.a})},function(e,t,n){"use strict";var r=n(22),i=n.n(r),a=n(61),o=n(62),u=n(96);window.babyEye||(window.babyEye={}),i()(babyEye,a.a,o.a,u.a),t.a=babyEye},function(e,t,n){n(57),e.exports=n(0).Object.assign},function(e,t,n){var r=n(2);r(r.S+r.F,"Object",{assign:n(58)})},function(e,t,n){"use strict";var r=n(16),i=n(29),a=n(18),o=n(19),u=n(38),s=Object.assign;e.exports=!s||n(10)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=r})?function(e,t){for(var n=o(e),s=arguments.length,l=1,f=i.f,p=a.f;s>l;)for(var h,d=u(arguments[l++]),y=f?r(d).concat(f(d)):r(d),v=y.length,g=0;v>g;)p.call(d,h=y[g++])&&(n[h]=d[h]);return n}:s},function(e,t,n){var r=n(11),i=n(39),a=n(60);e.exports=function(e){return function(t,n,o){var u,s=r(t),l=i(s.length),f=a(o,l);if(e&&n!=n){for(;l>f;)if((u=s[f++])!=u)return!0}else for(;l>f;f++)if((e||f in s)&&s[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(25),i=Math.max,a=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):a(e,t)}},function(e,t,n){"use strict";var r=n(14),i=n.n(r),a=n(15),o=n.n(a),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i()(this,e),this.x=t,this.y=n}return o()(e,[{key:"set",value:function(e,t){this.x=e,this.y=t}},{key:"add",value:function(e){this.x+=e.x,this.y+=e.y}},{key:"sub",value:function(e){this.x-=e.x,this.y-=e.y}},{key:"mult",value:function(e){this.x*=e,this.y*=e}},{key:"div",value:function(e){this.x/=e,this.y/=e}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"normalize",value:function(){var e=this.mag();0==e&&(e=1),this.x/=e,this.y/=e}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"limit",value:function(e){this.mag()>e&&(this.normalize(),this.mult(e))}},{key:"heading",value:function(){return 180*Math.atan2(this.y,this.x)/Math.PI}},{key:"neg",value:function(){this.x=-this.x,this.y=-this.y}},{key:"get",value:function(){return new e(this.x,this.y)}}],[{key:"distance",value:function(t,n){return e.sub(n,t).mag()}},{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"sub",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"mult",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"div",value:function(t,n){return new e(t.x/n,t.y/n)}}]),e}();t.a={Vec2:u}},function(e,t,n){"use strict";var r=n(15),i=n.n(r),a=n(63),o=n.n(a),u=n(14),s=n.n(u),l=n(67),f=n.n(l),p=n(88),h=n.n(p),d=function(e){function t(e,n,r){s()(this,t);var i=f()(this,(t.__proto__||o()(t)).call(this,e));return i.set({cursor:"pointer",regX:e.width/2,regY:e.height/2}),i.addEventListener("mousedown",function(e){e.stopPropagation(),n&&n()}),i.addEventListener("pressup",function(e){e.stopPropagation(),r&&r()}),i}return h()(t,e),t}(createjs.Bitmap),y=function(e){function t(e,n,r){s()(this,t);var i=f()(this,(t.__proto__||o()(t)).call(this));return i.callback=r,i.viewNormal=new createjs.Bitmap(e),i.viewHover=new createjs.Bitmap(n),i.viewHover.visible=!1,i.hovering=!1,i.cursor="pointer",i.addChild(i.viewNormal,i.viewHover),i.events(),i}return h()(t,e),i()(t,[{key:"events",value:function(){var e=this;this.addEventListener("mouseover",function(){e.viewHover.visible=!0,e.viewNormal.stage&&e.viewNormal.stage.update()}),this.addEventListener("mouseout",function(){e.viewHover.visible=!1,e.viewNormal.stage&&e.viewNormal.stage.update()}),this.addEventListener("mousedown",function(t){t.stopPropagation(),e.callback()})}}]),t}(createjs.Container),v=function(e){function t(e){s()(this,t);var n=function(){window.game&&window.game.stage&&window.game.stage.enableMouseOver(0),e()},r=f()(this,(t.__proto__||o()(t)).call(this,babyEye.prepareTrainQueue.getResult("replay-text"),babyEye.prepareTrainQueue.getResult("replay"),n));return r.set({x:10,y:5}),r}return h()(t,e),t}(y),g=function(e){function t(e){s()(this,t);var n=function(){window.game.pause&&window.game.pause();var t={calledByHelp:!0,instruction:e.instruction,staticPath:e.staticPath,instructionItems:e.instructionItems,fontSizeDelta:e.fontSizeDelta,lineHeightDelta:e.lineHeightDelta,language:e.language,callback:function(){window.game.continue&&window.game.continue()}};babyEye.prepareTrain(t)},r=f()(this,(t.__proto__||o()(t)).call(this,babyEye.prepareTrainQueue.getResult("help-text"),babyEye.prepareTrainQueue.getResult("help"),n));return r.set({x:90,y:5}),r}return h()(t,e),t}(y),b=function(e){function t(e){s()(this,t);var n=f()(this,(t.__proto__||o()(t)).call(this,e));return n.regX=e.width/2,n.regY=e.height/2,n}return h()(t,e),t}(createjs.Bitmap),m=function(){function e(t){s()(this,e),this.duration=t.duration,this.callback=t.callback,this.termination=!1,this.current=0,this.lastUpdateView=0,this.buildView(),this.updateView()}return i()(e,[{key:"update",value:function(e){this.termination||(this.current+=e,this.current-this.lastUpdateView>1e3&&(this.lastUpdateView=this.current,this.updateView()),this.current>this.duration&&(this.termination=!0,this.textTime.text="00:00",this.callback()))}},{key:"buildView",value:function(){this.view=new createjs.Container,this.view.set({x:1050,y:5});var e=babyEye.prepareTrainQueue.getResult("count-down"),t=new createjs.Bitmap(e);this.textTime=new createjs.Text("","28px fantasy","white"),this.textTime.set({textAlign:"center",x:160,y:15}),this.view.addChild(t,this.textTime)}},{key:"updateView",value:function(){this.remain=(.001*(this.duration-this.current)).toFixed(0);var e=Math.floor(this.remain/60).toString(),t=(this.remain%60).toFixed(0);1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),this.textTime.text=e+":"+t}}]),e}(),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;s()(this,e),this.value=t,this.minValue=n,this.maxValue=r}return i()(e,[{key:"buildView",value:function(e){this.view=new createjs.Container,this.view.set({x:1050,y:5});var t=babyEye.prepareTrainQueue.getResult(e),n=new createjs.Bitmap(t);this.text=new createjs.Text(this.value,"28px fantasy","white"),this.text.set({textAlign:"center",x:150,y:15}),this.view.addChild(n,this.text)}},{key:"changeValue",value:function(e){this.setValue(this.value+e)}},{key:"setValue",value:function(e){this.minValue<=e&&e<=this.maxValue?this.value=e:this.minValue>e?this.value=this.minValue:this.value=this.maxValue,this.text.text=this.value}}]),e}(),x=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1],r=arguments[2];s()(this,t);var i=f()(this,(t.__proto__||o()(t)).call(this,e,n,r));return i.buildView("level"),i}return h()(t,e),t}(w),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments[1],r=arguments[2];s()(this,t);var i=f()(this,(t.__proto__||o()(t)).call(this,e,n,r));return i.buildView("score"),i}return h()(t,e),t}(w),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments[1],r=arguments[2];s()(this,t);var i=f()(this,(t.__proto__||o()(t)).call(this,e,n,r));return i.buildView("remain"),i}return h()(t,e),t}(w),T=function(){function e(t){s()(this,e),this.config=t,this.buildView()}return i()(e,[{key:"buildView",value:function(){this.view=new createjs.Container;var e=babyEye.prepareTrainQueue.getResult("end-pop-up"),t=new createjs.Bitmap(e);t.set({regX:e.width/2,regY:e.height/2}),this.text=new createjs.Text(this.config.text,"32px sans-serif","rgb(50,50,50)"),this.text.set({x:-250,y:-100,lineHeight:50}),this.view.addChild(t,this.text),this.view.set({x:690,y:360})}}]),e}(),k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments[1],r=arguments[2];s()(this,t);var i=f()(this,(t.__proto__||o()(t)).call(this,e,n,r));return i.buildView("travel"),i.text.x=120,i}return h()(t,e),t}(w),j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments[1],r=arguments[2];s()(this,t);var i=f()(this,(t.__proto__||o()(t)).call(this,e,n,r));return i.buildView("ski-travel"),i.text.x=120,i}return h()(t,e),t}(w),O=function(){function e(t){s()(this,e),this.items=t.items,this.buildView()}return i()(e,[{key:"buildView",value:function(){var e=this;this.view=new createjs.Container,this.items.forEach(function(t,n){e.view.addChild(t.content),t.content.set({x:t.x?t.x:0,y:t.y?t.y:0})})}}]),e}();t.a={Button:d,InteractiveButton:y,ReplayButton:v,HelpButton:g,Bitmap:b,CountDown:m,Level:x,Score:E,Remain:_,PopUp:T,Travel:k,SkiTravel:j,Page:O}},function(e,t,n){e.exports={default:n(64),__esModule:!0}},function(e,t,n){n(65),e.exports=n(0).Object.getPrototypeOf},function(e,t,n){var r=n(19),i=n(40);n(66)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(2),i=n(0),a=n(10);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",o)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(41),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){e.exports={default:n(69),__esModule:!0}},function(e,t,n){n(42),n(74),e.exports=n(33).f("iterator")},function(e,t,n){var r=n(25),i=n(24);e.exports=function(e){return function(t,n){var a,o,u=String(i(t)),s=r(n),l=u.length;return s<0||s>=l?e?"":void 0:(a=u.charCodeAt(s),a<55296||a>56319||s+1===l||(o=u.charCodeAt(s+1))<56320||o>57343?e?u.charAt(s):a:e?u.slice(s,s+2):o-56320+(a-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(31),i=n(12),a=n(32),o={};n(7)(o,n(1)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var r=n(4),i=n(8),a=n(16);e.exports=n(5)?Object.defineProperties:function(e,t){i(e);for(var n,o=a(t),u=o.length,s=0;u>s;)r.f(e,n=o[s++],t[n]);return e}},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){n(75);for(var r=n(3),i=n(7),a=n(13),o=n(1)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var l=u[s],f=r[l],p=f&&f.prototype;p&&!p[o]&&i(p,o,l),a[l]=a.Array}},function(e,t,n){"use strict";var r=n(76),i=n(77),a=n(13),o=n(11);e.exports=n(43)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(79),__esModule:!0}},function(e,t,n){n(80),n(85),n(86),n(87),e.exports=n(0).Symbol},function(e,t,n){"use strict";var r=n(3),i=n(6),a=n(5),o=n(2),u=n(44),s=n(81).KEY,l=n(10),f=n(27),p=n(32),h=n(17),d=n(1),y=n(33),v=n(34),g=n(82),b=n(83),m=n(8),w=n(9),x=n(11),E=n(21),_=n(12),T=n(31),k=n(84),j=n(46),O=n(4),S=n(16),C=j.f,R=O.f,B=k.f,M=r.Symbol,P=r.JSON,L=P&&P.stringify,Q=d("_hidden"),F=d("toPrimitive"),A={}.propertyIsEnumerable,I=f("symbol-registry"),V=f("symbols"),D=f("op-symbols"),N=Object.prototype,H="function"==typeof M,G=r.QObject,z=!G||!G.prototype||!G.prototype.findChild,$=a&&l(function(){return 7!=T(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=C(N,t);r&&delete N[t],R(e,t,n),r&&e!==N&&R(N,t,r)}:R,W=function(e){var t=V[e]=T(M.prototype);return t._k=e,t},Y=H&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},X=function(e,t,n){return e===N&&X(D,t,n),m(e),t=E(t,!0),m(n),i(V,t)?(n.enumerable?(i(e,Q)&&e[Q][t]&&(e[Q][t]=!1),n=T(n,{enumerable:_(0,!1)})):(i(e,Q)||R(e,Q,_(1,{})),e[Q][t]=!0),$(e,t,n)):R(e,t,n)},q=function(e,t){m(e);for(var n,r=g(t=x(t)),i=0,a=r.length;a>i;)X(e,n=r[i++],t[n]);return e},U=function(e,t){return void 0===t?T(e):q(T(e),t)},J=function(e){var t=A.call(this,e=E(e,!0));return!(this===N&&i(V,e)&&!i(D,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,Q)&&this[Q][e])||t)},K=function(e,t){if(e=x(e),t=E(t,!0),e!==N||!i(V,t)||i(D,t)){var n=C(e,t);return!n||!i(V,t)||i(e,Q)&&e[Q][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=B(x(e)),r=[],a=0;n.length>a;)i(V,t=n[a++])||t==Q||t==s||r.push(t);return r},ee=function(e){for(var t,n=e===N,r=B(n?D:x(e)),a=[],o=0;r.length>o;)!i(V,t=r[o++])||n&&!i(N,t)||a.push(V[t]);return a};H||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===N&&t.call(D,n),i(this,Q)&&i(this[Q],e)&&(this[Q][e]=!1),$(this,e,_(1,n))};return a&&z&&$(N,e,{configurable:!0,set:t}),W(e)},u(M.prototype,"toString",function(){return this._k}),j.f=K,O.f=X,n(45).f=k.f=Z,n(18).f=J,n(29).f=ee,a&&!n(30)&&u(N,"propertyIsEnumerable",J,!0),y.f=function(e){return W(d(e))}),o(o.G+o.W+o.F*!H,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var re=S(d.store),ie=0;re.length>ie;)v(re[ie++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return i(I,e+="")?I[e]:I[e]=M(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in I)if(I[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!H,"Object",{create:U,defineProperty:X,defineProperties:q,getOwnPropertyDescriptor:K,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),P&&o(o.S+o.F*(!H||l(function(){var e=M();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(w(t)||void 0!==e)&&!Y(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,L.apply(P,r)}}),M.prototype[F]||n(7)(M.prototype,F,M.prototype.valueOf),p(M,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(e,t,n){var r=n(17)("meta"),i=n(9),a=n(6),o=n(4).f,u=0,s=Object.isExtensible||function(){return!0},l=!n(10)(function(){return s(Object.preventExtensions({}))}),f=function(e){o(e,r,{value:{i:"O"+ ++u,w:{}}})},p=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!s(e))return"F";if(!t)return"E";f(e)}return e[r].i},h=function(e,t){if(!a(e,r)){if(!s(e))return!0;if(!t)return!1;f(e)}return e[r].w},d=function(e){return l&&y.NEED&&s(e)&&!a(e,r)&&f(e),e},y=e.exports={KEY:r,NEED:!1,fastKey:p,getWeak:h,onFreeze:d}},function(e,t,n){var r=n(16),i=n(29),a=n(18);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,u=n(e),s=a.f,l=0;u.length>l;)s.call(e,o=u[l++])&&t.push(o);return t}},function(e,t,n){var r=n(23);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(11),i=n(45).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?u(e):i(r(e))}},function(e,t){},function(e,t,n){n(34)("asyncIterator")},function(e,t,n){n(34)("observable")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(89),a=r(i),o=n(93),u=r(o),s=n(41),l=r(s);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,u.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.default?(0,a.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(90),__esModule:!0}},function(e,t,n){n(91),e.exports=n(0).Object.setPrototypeOf},function(e,t,n){var r=n(2);r(r.S,"Object",{setPrototypeOf:n(92).set})},function(e,t,n){var r=n(9),i=n(8),a=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(20)(Function.call,n(46).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){e.exports={default:n(94),__esModule:!0}},function(e,t,n){n(95);var r=n(0).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(2);r(r.S,"Object",{create:n(31)})},function(e,t,n){"use strict";var r=n(97),i=n.n(r),a=n(22),o=n.n(a),u={};u.anTarget=function(e,t,n){return e^t^n},u.steInOut=function(e,t,n){return e^t^n},window.anTarget=u.anTarget,window.steInOut=u.steInOut,u.redFilter=new createjs.ColorFilter(1,0,0,1,255,0,0,0),u.blueFilter=new createjs.ColorFilter(0,0,1,1,0,0,255,0),u.getParam=function(e,t){if(-1==e.indexOf("?"))return null;var n=null;e.split("?")[1].split("&").forEach(function(e){e.split("=")[0]==t&&(n=e.split("=")[1])});return n},u.average=function(e){var t=e.length;return e.reduce(function(e,t){return e+t},0)/t},u.distance=function(e,t,n,r){var i=Math.abs(e-n),a=Math.abs(t-r);return Math.sqrt(i*i+a*a)},u.pointDistance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},u.disSquare=function(e,t,n,r){return Math.pow(e-n,2)+Math.pow(t-r,2)},u.randomRange=function(e,t){return Math.floor(e+Math.random()*(t-e))},u.randomExcept=function(e,t,n){var r=u.randomRange(e,t);return r==n?u.randomExcept(e,t,n):r},u.shuffle=function(e){for(var t=0;t<e.length;){var n=u.randomRange(0,t),r=e[t];e[t]=e[n],e[n]=r,t++}},u.bundle=function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},u.reversed=function(e){for(var t=[],n=e.length-1;n>=0;n--)t.push(e[n]);return t},u.inRange=function(e,t){return t[0]<e&&e<t[1]},u.rangeArr=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],i=e;i<t;i+=n)r.push(i);return r},u.constrain=function(e,t,n){return e>n?n:e<t?t:e},u.map=function(e,t,n,r,i){var a=n-t,o=i-r,s=r+e/a*o;return u.constrain(s,r,i)},u.selectFrom=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.length<t)throw new Error("the array is too small");var n=[],r=[];for(o()(n,e);r.length<t;){var i=u.randomRange(0,n.length),a=n.splice(i,1)[0];r.push(a)}return r},u.randomChoice=function(e){return e[babyEye.randomRange(0,e.length)]},u.animateDraw=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.shape,a=e.points,o=e.color,s=e.strokeStyle,l=e.speed,f=(t=r.graphics.s(o)).ss.apply(t,i()(s)).mt(a[0].x,a[0].y),p=f.lt(a[0].x,a[0].y).command,h=u.pointDistance(a[0],a[1])*(1/l),d=createjs.Tween.get(p).to({x:a[1].x,y:a[1].y},h);e.onChange&&d.on("change",function(){e.onChange(p)}),d.call(function(){if(a.length<3){if(!e.finalFill)return;return a=n.concat(a),a.forEach(function(t,n){if(0==n){var r=e.fillColor?e.fillColor:o;f.f(r).mt(t.x,t.y)}else f.lt(t.x,t.y)}),void(e.onComplete&&e.onComplete())}n.push(a.shift()),u.animateDraw(e,n)})},u.getCookie=function(e){var t="; "+document.cookie,n=t.split("; "+e+"=");if(2==n.length)return n.pop().split(";").shift()},u.isMobile=function(){var e=navigator.userAgent.toLowerCase(),t="ipad"==e.match(/ipad/i),n="iphone os"==e.match(/iphone os/i),r="midp"==e.match(/midp/i),i="rv:1.2.3.4"==e.match(/rv:1.2.3.4/i),a="ucweb"==e.match(/ucweb/i),o="android"==e.match(/android/i),u="windows ce"==e.match(/windows ce/i),s="windows mobile"==e.match(/windows mobile/i);return!!(t||n||r||i||a||o||u||s)},t.a=u},function(e,t,n){"use strict";t.__esModule=!0;var r=n(98),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){e.exports={default:n(99),__esModule:!0}},function(e,t,n){n(42),n(100),e.exports=n(0).Array.from},function(e,t,n){"use strict";var r=n(20),i=n(2),a=n(19),o=n(101),u=n(102),s=n(39),l=n(103),f=n(104);i(i.S+i.F*!n(106)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,p,h=a(e),d="function"==typeof this?this:Array,y=arguments.length,v=y>1?arguments[1]:void 0,g=void 0!==v,b=0,m=f(h);if(g&&(v=r(v,y>2?arguments[2]:void 0,2)),void 0==m||d==Array&&u(m))for(t=s(h.length),n=new d(t);t>b;b++)l(n,b,g?v(h[b],b):h[b]);else for(p=m.call(h),n=new d;!(i=p.next()).done;b++)l(n,b,g?o(p,v,[i.value,b],!0):i.value);return n.length=b,n}})},function(e,t,n){var r=n(8);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t,n){var r=n(13),i=n(1)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},function(e,t,n){"use strict";var r=n(4),i=n(12);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(105),i=n(1)("iterator"),a=n(13);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[r(e)]}},function(e,t,n){var r=n(23),i=n(1)("toStringTag"),a="Arguments"==r(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),i))?n:a?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,n){var r=n(1)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:n=!0}},a[r]=function(){return o},e(a)}catch(e){}return n}},function(e,t,n){"use strict";function r(){var e=function(e,t){var n=navigator.mimeTypes;for(var r in n)if(n[r][e]==t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer");return function(){return navigator.userAgent.toLowerCase().indexOf("chrome")>1}()&&e}var i=n(22),a=n.n(i),o=n(14),u=n.n(o),s=n(15),l=n.n(s),f=function(e){function t(){babyEye.handleResize(),i(),e.calledByHelp||n()}function n(){babyEye.failBitmap=new babyEye.Bitmap(babyEye.prepareTrainQueue.getResult("fail")),babyEye.successBitmap=new babyEye.Bitmap(babyEye.prepareTrainQueue.getResult("success")),babyEye.failBitmap.set({x:640,y:360,scaleX:.65,scaleY:.65}),babyEye.successBitmap.set({x:640,y:360,scaleX:.65,scaleY:.65})}function i(){B.forEach(function(t,n){e[t]&&P.push(n)}),M[P[L]]()}function o(){O.removeAllChildren(),L++,M[P[L]]&&M[P[L]]()}function s(){var t=babyEye.prepareTrainQueue.getResult("selectGlassesBG"),n=new createjs.Bitmap(t),r=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult("redBlue"),babyEye.prepareTrainQueue.getResult("redBlue-hover"),function(){g("rb")}),i=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult("blueRed"),babyEye.prepareTrainQueue.getResult("blueRed-hover"),function(){g("br")});if(r.set({x:C/2-40,y:R-120}),i.set({x:1.5*C-245,y:R-120}),O.removeAllChildren(),O.addChild(n,r,i),O.update(),e.background){var a=e.staticPath+"templates/default/img/background/"+e.background+".png";$("body").css({"background-image":"url("+a+")","background-repeat":"repeat"})}}function f(){var e=localStorage.getItem("lazyeye");if("0"!==e&&"1"!==e){var t=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("selectEyeBG"));O.addChild(t);var n=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult("left-eye"),babyEye.prepareTrainQueue.getResult("left-eye-hover"),function(){b(0)}),r=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult("right-eye"),babyEye.prepareTrainQueue.getResult("right-eye-hover"),function(){b(1)});r.set({x:1.5*C-245,y:R-140}),n.set({x:C/2-40,y:R-140}),O.addChild(n,r)}else e=parseInt(e),b(e);O.update()}function p(){var e=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("skyBG"));O.addChild(e);var t=["easy","medium","hard"],n=t.map(function(e){var t=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult(e),babyEye.prepareTrainQueue.getResult(e+"-hover"),function(){m(e)}),n=babyEye.prepareTrainQueue.getResult(e);return t.set({regX:n.width/2}),t.set({regY:n.height/2}),O.addChild(t),t});n[0].set({x:C,y:250}),n[1].set({x:C,y:400}),n[2].set({x:C,y:550}),O.update()}function h(){var e=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("selectMode"));O.addChild(e);var t=["fuse-center","fuse-round","fuse-entire"],n=t.map(function(e){var t=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult(e),babyEye.prepareTrainQueue.getResult(e+"-hover"),function(){w(e.split("-")[1])}),n=babyEye.prepareTrainQueue.getResult(e);return t.set({regX:n.width/2}),t.set({regY:n.height/2}),O.addChild(t),t});n[0].set({x:C,y:250}),n[1].set({x:C,y:400}),n[2].set({x:C,y:550}),O.update()}function d(){var e=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("selectMode"));O.addChild(e);var t=["twinkle-altermate","twinkle-lazy","twinkle-same-time"],n=t.map(function(e){var t=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult(e),babyEye.prepareTrainQueue.getResult(e+"-hover"),function(){x(e.split("-")[1])}),n=babyEye.prepareTrainQueue.getResult(e);return t.set({regX:n.width/2}),t.set({regY:n.height/2}),O.addChild(t),t});n[0].set({x:C,y:250}),n[1].set({x:C,y:400}),n[2].set({x:C,y:550}),O.update()}function y(){var e=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("selectMode"));O.addChild(e);var t=["convergence","divergence"],n=t.map(function(e){var t=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult(e),babyEye.prepareTrainQueue.getResult(e+"-hover"),function(){E(e)}),n=babyEye.prepareTrainQueue.getResult(e);return t.set({regX:n.width/2}),t.set({regY:n.height/2}),O.addChild(t),t});n[0].set({x:C,y:300}),n[1].set({x:C,y:500}),O.update()}function v(){var e="rb"==S.glasses?"red":"blue",t="rb"==S.glasses?"blue":"red",n=babyEye.getParam(window.location.href,"squint"),r=null;r="exotropia"==n?["testForConvergence"]:"esotropia"==n?["testForDivergence"]:["testForConvergence","testForDivergence"];var i=0,a=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult(r[i]));O.addChild(a);var s=function(){function s(){u()(this,s),this.vx=.01,this.lastFrame=0,this.setView(),this.buildButtons(),this.render()}return l()(s,[{key:"setView",value:function(){if(this.view=new createjs.Container,this.view.compositeOperation="darken",this.targetLeft=new createjs.Shape,this.targetLeftCommand=this.targetLeft.graphics.f(e).command,this.targetLeft.graphics.dc(0,0,50),this.targetRight=new createjs.Shape,this.targetRightCommand=this.targetRight.graphics.f(t).command,this.targetRight.graphics.dc(0,0,50),"esotropia"==n){var r=[this.targetRight,this.targetLeft];this.targetLeft=r[0],this.targetRight=r[1]}this.view.addChild(this.targetLeft,this.targetRight),O.addChild(this.view),this.view.set({x:640,y:360})}},{key:"buildButtons",value:function(){var e=this;this.statusButton=new f,this.confirmButton=new p(function(){e.handleConfirm()}),this.skipButton=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("skip")),this.skipButton.set({x:460,y:540,cursor:"pointer"}),this.skipButton.addEventListener("mousedown",function(){babyEye.lastTrainInfor?(S.convergenceDelta=babyEye.lastTrainInfor.convergenceDelta,S.divergenceDelta=babyEye.lastTrainInfor.divergenceDelta):(S.convergenceDelta=30,S.divergenceDelta=30),e.complete=!0,o()}),O.addChild(this.statusButton.view,this.confirmButton.view,this.skipButton)}},{key:"handleConfirm",value:function(){this.statusButton.changeStatus("stop");var e=this.targetRight.x-this.targetLeft.x;if(e=babyEye.constrain(e,30,300),this.targetLeft.x=this.targetRight.x=0,"testForConvergence"==r[i]?S.convergenceDelta=e:S.divergenceDelta=e,i++,r[i]){O.removeChild(a),a=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult(r[i])),O.addChildAt(a,0);var t=[this.targetLeftCommand.style,this.targetRightCommand.style];this.targetRightCommand.style=t[0],this.targetLeftCommand.style=t[1]}else this.complete=!0,S.divergenceDelta||(S.divergenceDelta=0),S.convergenceDelta||(S.convergenceDelta=0),O.removeAllChildren(),o()}},{key:"update",value:function(e){"stop"!=this.statusButton.status&&(this.targetRight.x<150?(this.targetLeft.x-=this.vx*e,this.targetRight.x+=this.vx*e):this.handleConfirm())}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.complete){var n=t-this.lastFrame;this.lastFrame=t,(n<0||n>150)&&(n=0),this.update(n),O.update(),window.requestAnimationFrame(function(t){e.render(t)})}}}]),s}(),f=function(){function e(t){u()(this,e),this.callback=t,this.status="stop",this.setView(),this.events()}return l()(e,[{key:"setView",value:function(){this.view||(this.view=new createjs.Container),this.view.removeAllChildren();var e="move"==this.status?babyEye.prepareTrainQueue.getResult("pause"):babyEye.prepareTrainQueue.getResult("move-right"),t=new createjs.Bitmap(e);t.set({cursor:"pointer"}),this.view.x=740,this.view.y=540,this.view.addChild(t)}},{key:"events",value:function(){var e=this;this.view.addEventListener("mousedown",function(){e.changeStatus(),e.setView()})}},{key:"changeStatus",value:function(e){this.status=e||("move"==this.status?"stop":"move"),this.setView()}}]),e}(),p=function(){function e(t){u()(this,e),this.callback=t,this.confirmTimes=0,this.setView(),this.events()}return l()(e,[{key:"setView",value:function(){this.view=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("confirm-text")),this.view.set({x:600,y:540,cursor:"pointer"})}},{key:"events",value:function(){var e=this;this.view.addEventListener("mousedown",function(){e.confirmTimes++,e.callback()})}}]),e}();new s}function g(e){S.glasses=e,o()}function b(e){if(S.targetInfor={},!S.glasses)throw new Error("glasses not defined");var t="rb"==S.glasses?0:1;0==anTarget(1,e,t)?(S.targetInfor.filter=new createjs.ColorFilter(1,0,0,1,255,0,0,0),S.targetInfor.color="red"):(S.targetInfor.filter=new createjs.ColorFilter(0,0,1,1,0,0,255,0),S.targetInfor.color="blue"),o()}function m(e){S.difficulty=e,o()}function w(e){S.fuseType=e,o()}function x(e){S.twinkleType=e,o()}function E(e){S.vergenceType=e,o()}function _(){if(O.removeAllChildren(),"string"==typeof e.instruction){var t=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult("instructionBG"));O.addChild(t);var n=e.fontSizeDelta?e.fontSizeDelta:0,i=new createjs.Text("","normal "+(30+n)+"px sans-serif","rgb(50,50,50)");if(i.set({lineWidth:700,x:300,y:200,lineHeight:38+(e.lineHeightDelta?e.lineHeightDelta:0)}),r()){i.font="bold "+(28+n)+"px sans-serif";babyEye.setWrapText(i,e.instruction)}else{babyEye.setWrapText(i,e.instruction)}O.addChild(i)}else{var a=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult(e.instruction.id));O.addChild(a)}var u=e.calledByHelp?"confirm":"start",s=new babyEye.InteractiveButton(babyEye.prepareTrainQueue.getResult(u+"-text"),babyEye.prepareTrainQueue.getResult(u),o);s.set({x:1180,y:620}),O.addChild(s),e.instructionItems&&e.instructionItems.forEach(function(e){var t=new createjs.Bitmap(babyEye.prepareTrainQueue.getResult(e.id));t.set({x:e.x,y:e.y}),O.addChild(t)}),O.update()}function T(){babyEye.lastTrainInfor={},a()(babyEye.lastTrainInfor,S),e.callback&&e.callback(S),O.removeAllChildren(),O.update(),O.enableMouseOver(0),$("#instruction-canvas").hide(),$("#game-canvas").show()}function k(e,t){return{id:e.slice(0,e.indexOf(".")),src:t}}if($("#game-canvas").hide(),0==$("#instruction-canvas").length){var j=document.createElement("canvas");$(j).addClass("auto-scale"),j.id="instruction-canvas",j.width=1280,j.height=720,$("#game-canvas").before(j)}$("#instruction-canvas").show();var O=new createjs.Stage("instruction-canvas");window.instructionStage=O,O.enableMouseOver();var S={},C=640,R=360,B=["selectGlasses","selectLazyEye","instruction","selectDifficulty","selectFuseType","selectTwinkleType","selectVergenceType","testForFU","callback"],M=[s,f,_,p,h,d,y,v,T],P=[],L=0;babyEye.prepareTrainQueue?t():function(t){$("#loading").show(),babyEye.prepareTrainQueue=new createjs.LoadQueue,babyEye.prepareTrainQueue.setMaxConnections(100),babyEye.prepareTrainQueue.maintainScriptOrder=!0;var n=void 0;!e.language||e.language&&"zh"==e.language?n=e.staticPath+"templates/default/img/":e.language&&(n=e.staticPath+"templates/default/img-"+e.language+"/");var r=[],i=new createjs.Text("","30px fantasy","rgb(50,50,50)");i.set({x:C,y:R,textAlign:"center",textBaseline:"middle"}),O.addChild(i);var a=["redBlue.png","redBlue-hover.png","blueRed.png","blueRed-hover.png","left-eye.png","left-eye-hover.png","right-eye.png","right-eye-hover.png","start.png","start-text.png","confirm.png","confirm-text.png","replay.png","help.png","replay-text.png","help-text.png","move-right.png","pause.png","skip.png"].map(function(e){return k(e,n+"buttons/"+e)}),o=["selectGlassesBG.png","instructionBG.png","selectEyeBG.png","skyBG.png","selectMode.png"].map(function(e){return k(e,n+"background/"+e)}),u=["testForConvergence.png","testForDivergence.png"].map(function(e){return k(e,n+"background/"+e)}),s=["fail.png","success.png","count-down.png","end-pop-up.png","level.png","score.png","remain.png","travel.png","ski-travel.png"].map(function(e){return k(e,n+"other/"+e)}),l=["easy.png","easy-hover.png","medium.png","medium-hover.png","hard.png","hard-hover.png"].map(function(e){return k(e,n+"buttons/"+e)}),f=["fuse-center.png","fuse-center-hover.png","fuse-entire.png","fuse-entire-hover.png","fuse-round.png","fuse-round-hover.png"].map(function(e){return k(e,n+"buttons/"+e)}),p=["twinkle-altermate.png","twinkle-altermate-hover.png","twinkle-lazy.png","twinkle-lazy-hover.png","twinkle-same-time.png","twinkle-same-time-hover.png"].map(function(e){return k(e,n+"buttons/"+e)}),h=["convergence.png","convergence-hover.png","divergence.png","divergence-hover.png"].map(function(e){return k(e,n+"buttons/"+e)});r=r.concat(a).concat(o).concat(s),e.testForFU&&(r=r.concat(u)),e.selectDifficulty&&(r=r.concat(l)),e.selectFuseType&&(r=r.concat(f)),e.selectTwinkleType&&(r=r.concat(p)),e.selectVergenceType&&(r=r.concat(h)),e.instructionItems&&(r=r.concat(e.instructionItems)),e.instruction&&"string"!=typeof e.instruction&&r.push(e.instruction),"en"!=e.language&&babyEye.prepareTrainQueue.addEventListener("progress",function(e){i.text="资源加载中...",O.update()}),babyEye.prepareTrainQueue.addEventListener("complete",function(e){$("#loading").hide(),O.removeAllChildren(),t()}),babyEye.prepareTrainQueue.loadManifest(r)}(t)};t.a=f},function(e,t,n){"use strict";var r=function(e,t){var n=e.lineWidth,r=t.split(""),i=-1,a="",o=[];for(e.text="";r[++i];)e.text+=r[i],e.getMeasuredWidth()>n&&(o.push(a),e.text=r[i]),a=e.text;o.push(a),e.text=o.join("\n")};t.a=r}]);